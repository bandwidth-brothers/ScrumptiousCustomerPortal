<app-alert *ngIf="modalMsg" [message]="modalMsg" (closeEvent)="onCloseAlert()">
</app-alert>
<div *ngIf="customer">

    <form [formGroup]="customerProfileForm">
        <div class="container">
            <main>
                <div class="py-5 text-center">
                    <!-- <img class="d-block mx-auto mb-4" src="data:image/png;base64,{{ user.photo }}" alt="" width="100"
                    height="100"> -->
                    <h2>{{customer.firstName}} {{customer.lastName}}</h2>
                    <p class="lead">Loyalty points: {{ customer.loyaltyPoints }}</p>
                </div>

                <div class="row g-5">

                    <div class="col-md-7 col-lg-8" class="selectContainer">
                        <h4 class="mb-3">Customer Info</h4>
                        <div class="row g-3">
                            <div class="col-sm-6">
                                <label for="firstName" class="form-label">First name:</label>
                                <input placeholder="firstname" type="text" name="firstName" id="firstName"
                                    class="form-control" formControlName="firstName" required />
                                <!-- <div id="firstNameErrorText" class="alert alert-danger" [ngClass]="
                                  showErrorForField('firstName')
                                    ? 'shownErrorText'
                                    : 'hiddenErrorText'
                                ">
                                    Not a valid first name.
                                </div> -->
                            </div>

                            <div class="col-sm-6">
                                <label for="lastName" class="form-label">Last name</label>
                                <input type="text" class="form-control" id="lastName" placeholder=""
                                    formControlName="lastName" required="">

                                <!-- <div id="lastNameErrorText" class="alert alert-danger" [ngClass]="
                                    showErrorForField('lastName')
                                        ? 'shownErrorText'
                                        : 'hiddenErrorText'
                                    ">
                                    Not a valid last name.
                                </div> -->
                            </div>

                            <div class="col-12">
                                <label for="email" class="form-label">Email</label>
                                <input type="email" class="form-control" id="email" placeholder="" value="">
                                <div class="invalid-feedback">
                                    Please enter a valid email.
                                </div>
                            </div>

                            <div class="col-12">
                                <label for="phone" class="form-label">Phone</label>
                                <input type="phone" class="form-control" id="phone" placeholder=""
                                    formControlName="phone" required="">
                                <div class="invalid-feedback">
                                    Please enter a valid phone number.
                                </div>
                            </div>

                            <!-- TODO: implement some way to view/edit multiple addresses -->
                            <div class="col-12">
                                <label for="address" class="form-label">Address</label>
                                <input type="text" class="form-control" id="address" placeholder=""
                                    formControlName="addrLine1" required="">
                                <div class="invalid-feedback">
                                    Please enter your address.
                                </div>
                            </div>

                            <div class="col-12">
                                <label for="address2" class="form-label">Address 2 <span
                                        class="text-muted">(Optional)</span></label>
                                <input type="text" class="form-control" id="address2" formControlName="addrLine2"
                                    placeholder="Apartment or suite">
                            </div>
                            <!-- <div id="addrLine2ErrorText" class="alert alert-danger" [ngClass]="
                              showErrorForField('addrLine2')
                                ? 'shownErrorText'
                                : 'hiddenErrorText'
                            ">
                                Not a valid address line.
                            </div> -->


                            <div class="col-md-4">
                                <label for="state" class="form-label">State</label>
                                <select class="form-control" id="state" formControlName="state" required="">
                                    <option value="">{{ customer.state }}</option>
                                    <option>CA</option>
                                    <option>OH</option>
                                </select>
                                <div class="invalid-feedback">
                                    Please provide a valid state.
                                </div>
                            </div>

                            <div class="col-md-5">
                                <label for="city" class="form-label">City</label>
                                <input type="text" class="form-control" id="city" placeholder="" formControlName="city"
                                    required="">
                            </div>



                            <div class="col-md-3">
                                <label for="zip" class="form-label">Zip</label>
                                <input type="text" class="form-control" id="zip" placeholder="" formControlName="zip"
                                    required="">
                                <div class="invalid-feedback">
                                    Zip code required.
                                </div>
                            </div>
                        </div>

                        <hr class="my-4">

                        <h4 class="mb-3">Payment</h4>

                        <div class="my-3">
                            <div class="form-check">
                                <input id="credit" name="paymentMethod" type="radio" class="form-check-input" checked=""
                                    required="">
                                <label class="form-check-label" for="credit">Credit card</label>
                            </div>
                            <div class="form-check">
                                <input id="debit" name="paymentMethod" type="radio" class="form-check-input"
                                    required="">
                                <label class="form-check-label" for="debit">Debit card</label>
                            </div>
                            <div class="form-check">
                                <input id="paypal" name="paymentMethod" type="radio" class="form-check-input"
                                    required="">
                                <label class="form-check-label" for="paypal">PayPal</label>
                            </div>
                        </div>

                        <div class="row gy-3">
                            <div class="col-md-6">
                                <label for="cc-name" class="form-label">Name on card</label>
                                <input type="text" class="form-control" id="cc-name" placeholder="" required="">
                                <small class="text-muted">Full name as displayed on card</small>
                                <div class="invalid-feedback">
                                    Name on card is required
                                </div>
                            </div>

                            <div class="col-md-6">
                                <label for="cc-number" class="form-label">Credit card number</label>
                                <input type="text" class="form-control" id="cc-number" placeholder="" required="">
                                <div class="invalid-feedback">
                                    Credit card number is required
                                </div>
                            </div>

                            <div class="col-md-3">
                                <label for="cc-expiration" class="form-label">Expiration</label>
                                <input type="text" class="form-control" id="cc-expiration" placeholder="" required="">
                                <div class="invalid-feedback">
                                    Expiration date required
                                </div>
                            </div>

                            <div class="col-md-3">
                                <label for="cc-cvv" class="form-label">CVV</label>
                                <input type="text" class="form-control" id="cc-cvv" placeholder="" required="">
                                <div class="invalid-feedback">
                                    Security code required
                                </div>
                            </div>
                        </div>

                        <hr class="my-4">

                        <button id="updateButton" class="updateButton" [ngClass]="
                          customerProfileForm.valid ? 'updateButtonEnabled' : 'updateButtonDisabled'
                        " type="submit" [disabled]="!customerProfileForm.valid"
                            (click)="updateCustomer()">Update</button>
                    </div>
                </div>

            </main>
        </div>
    </form>

</div>
<div *ngIf="error">
    <h2>{{ error.status }} Error</h2>
    <p>{{ error.message }}</p>
</div>